# AiPhlo Product Architecture

## Service Tiers

### 1. Agency Tier
- **Pricing**: Monthly subscription (scales per site)
- **Access**: Full Webflow Designer + AiPhlo Command Interface
- **Control**: Master control over multiple sites
- **Use Case**: Design agencies managing client portfolios
- **Features**:
  - Batch operations across sites
  - White-label capabilities
  - API access for automation
  - Priority support

### 2. Consumer Hybrid Tier
- **Pricing**: One-time build fee + pay-per-update
- **Access**: Guided Editor + Chat interface
- **Control**: 75% AiPhlo build / 25% consumer input
- **Use Case**: Small business owners, creators
- **Features**:
  - Ask/answer-based customization
  - Directed Webflow procedures (guided unlocks)
  - Request-based changes (not imagination-based)
  - Login for future paid updates

### 3. Designer Pro Tier
- **Pricing**: Monthly subscription
- **Access**: Full Webflow Designer access
- **Control**: Complete self-serve
- **Use Case**: Power users, developers
- **Features**:
  - Full Webflow Designer capabilities
  - AiPhlo as optional assistant
  - Export/migrate options

---

## Directed Procedure System

The core innovation for Consumer Hybrid tier:

### Flow
```
1. Consumer requests change via chat
2. AiPhlo validates request against capabilities
3. If visual change needed:
   a. AiPhlo unlocks specific element
   b. Provides step-by-step Webflow instructions
   c. Consumer makes change with guidance
   d. AiPhlo validates change
   e. Element locks back to system control
4. If structural change:
   a. AiPhlo handles via API
   b. Consumer approves result
```

### Example: Hero Image Change
```
Consumer: "I want to update my hero image"

AiPhlo: "I'll guide you through this. Here's how:

1. Open your Webflow Dashboard
2. Click 'Designer' on your site
3. Select the hero section (I've highlighted it)
4. In the right panel, click 'Settings'
5. Click 'Replace Image'
6. Upload your new image (recommended: 1920x1080, JPG)
7. Click 'Save' when done

Let me know when you're finished and I'll verify it looks good."
```

### Capabilities vs Imagination
- System knows what's possible within the template
- Prevents requests that break design system
- Suggests alternatives when request exceeds capabilities

---

## Asset Storage Architecture

### Decision: Webflow CDN (Primary)

All assets uploaded to Webflow's native CDN:
- Fast, global delivery
- Native integration
- No external dependencies
- Managed by Webflow's infrastructure

### Migration Path
```
Current: localhost URLs → Production: Webflow CDN URLs

1. During build: Assets uploaded via Webflow API
2. URLs automatically generated by Webflow
3. JSON content updated with production URLs
4. No manual URL management needed
```

### Asset Types
| Type | Handling |
|------|----------|
| Images | Webflow CDN upload |
| Fonts | Google Fonts / Webflow native / Custom upload |
| Videos | Webflow CDN or external embed (YouTube/Vimeo) |
| Documents | Webflow CDN (PDFs, etc.) |

---

## Webflow Integration Points

### API Operations
- **Asset Upload**: Upload images/files to Webflow CDN
- **Site Publish**: Push changes live
- **Element Update**: Modify specific components
- **Collection Sync**: Update CMS content

### Access Roles
| Role | Designer | Editor | Viewer |
|------|----------|--------|--------|
| Agency | Yes | Yes | Yes |
| Hybrid | Guided | Yes | Yes |
| Pro | Yes | Yes | Yes |

### Element Locking
For Hybrid tier, implement element-level permissions:
- **Locked**: AiPhlo controls, user cannot edit
- **Guided**: User can edit with step-by-step guidance
- **Open**: User can freely edit (content areas)

---

## Technical Requirements

### For Webflow CDN Integration
1. Webflow API credentials (per site)
2. Asset upload endpoint implementation
3. URL replacement in JSON/HTML
4. Publish automation

### For Directed Procedures
1. Element identification system
2. Step-by-step instruction templates
3. Validation checks post-edit
4. Lock/unlock mechanism

### For Tiered Access
1. User authentication system
2. Tier tracking per account
3. Usage metering (for pay-per-update)
4. Role-based permissions sync with Webflow

---

## Next Steps

1. [ ] Implement Webflow API asset upload
2. [ ] Create URL migration script (localhost → CDN)
3. [ ] Build directed procedure template library
4. [ ] Design tier management system
5. [ ] Create consumer onboarding flow
